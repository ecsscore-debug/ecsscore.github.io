<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<title>ECSS Hiring Hub | Open Roles</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600;800&display=swap" rel="stylesheet">

<style>
/* GLOBAL */
body{
    margin:0;
    background:#030611;
    font-family:'Inter',sans-serif;
    color:#fff;
    overflow-x:hidden;
}

/* PARTICLES */
.particle{
    position:fixed;
    width:6px;height:6px;
    border-radius:50%;
    background:#4da8ff;
    opacity:0.45;
    animation:floatUp 12s linear infinite;
}
@keyframes floatUp{
    from{transform:translateY(110vh);opacity:0.25;}
    to{transform:translateY(-10vh);opacity:1;}
}

/* NAVBAR */
.navbar{
    position:fixed;
    top:0; left:0;
    width:100%;
    padding:18px 40px;
    display:flex;
    justify-content:space-between;
    align-items:center;
    background:rgba(10,20,45,0.45);
    backdrop-filter:blur(12px);
    z-index:9999;
    border-bottom:1px solid rgba(120,160,255,0.25);
}
.nav-logo{
    font-size:26px;
    font-weight:800;
    background:linear-gradient(90deg,#7fcaff,#e0f3ff);
    -webkit-background-clip:text;
    color:transparent;
    text-decoration:none;
}
.nav-links{
    display:flex;
    gap:28px;
    align-items:center;
}
.nav-links a{
    color:#d8e7ff;
    text-decoration:none;
    font-size:17px;
    font-weight:600;
    transition:0.3s;
}
.nav-links a:hover{ color:#7bc6ff; }
/* HAMBURGER */
.hamburger{
    width:30px;
    height:20px;
    display:none;
    flex-direction:column;
    justify-content:space-between;
    cursor:pointer;
}
.hamburger span{
    width:100%;
    height:3px;
    background:#d8e7ff;
    border-radius:3px;
    transition:.3s;
}
@media(max-width:850px){
    .nav-links{
        position:fixed;
        top:70px;
        right:-100%;
        flex-direction:column;
        gap:20px;
        width:230px;
        height:100vh;
        padding:30px 20px;
        background:rgba(10,20,45,0.92);
        border-left:1px solid rgba(120,160,255,0.25);
        transition:.4s ease;
    }
    .nav-links.active{ right:0; }
    .hamburger{ display:flex; }
    .hamburger.open span:nth-child(1){
        transform:translateY(8px) rotate(45deg);
    }
    .hamburger.open span:nth-child(2){
        opacity:0;
    }
    .hamburger.open span:nth-child(3){
        transform:translateY(-8px) rotate(-45deg);
    }
}

/* HERO */
.hero{
    padding:190px 20px 80px;
    text-align:center;
    background:linear-gradient(135deg,#0f1e46,#050916,#0f1e46);
}
.hero h1{
    font-size:58px;
    font-weight:900;
    background:linear-gradient(90deg,#59caff,#d7faff);
    -webkit-background-clip:text;
    color:transparent;
}
.hero-sub{
    opacity:0.75;
    font-size:18px;
}

/* LAALCH SECTION */
.lalach-box{
    margin-top:40px;
    text-align:center;
}
.lalach-meter{
    width:80%;
    height:20px;
    margin:auto;
    border-radius:12px;
    background:#0e1a30;
}
.lalach-fill{
    height:100%;
    width:0%;
    background:linear-gradient(90deg,#4da8ff,#7ffaff);
    border-radius:12px;
    transition:1.8s ease;
}
.lalach-text{
    margin-top:10px;
    font-size:26px;
    font-weight:900;
    background:linear-gradient(90deg,#72caff,#dcf7ff);
    -webkit-background-clip:text;
    color:transparent;
}

/* CONTAINER */
.container{
    max-width:1100px;
    margin:50px auto;
    padding:0 20px;
}

/* SEARCH BAR */
.search-bar{
    display:flex;
    justify-content:space-between;
    flex-wrap:wrap;
    gap:15px;
}
.search-bar input{
    flex:1;
    padding:14px;
    font-size:16px;
    border:none;
    border-radius:12px;
    background:rgba(255,255,255,0.08);
    color:#fff;
}

/* FILTER BUTTONS */
.filters{
    margin-top:20px;
    display:flex;
    gap:15px;
    flex-wrap:wrap;
}
.filter-btn{
    padding:10px 18px;
    background:rgba(255,255,255,0.08);
    border-radius:12px;
    cursor:pointer;
    transition:.3s;
}
.filter-btn:hover,
.filter-btn.active{
    background:#4a6cf7;
    box-shadow:0 0 20px rgba(80,120,255,0.5);
}

/* JOB CARD */
.job-card{
    background:rgba(20,30,60,0.55);
    padding:24px;
    border-radius:20px;
    border:1px solid rgba(120,160,255,0.25);
    backdrop-filter:blur(14px);
    margin-bottom:24px;
    transition:.35s;
    position:relative;
}
.job-card:hover{
    transform:translateY(-7px);
    box-shadow:0 0 35px rgba(120,160,255,0.45);
}
.job-title{
    font-size:23px;
    font-weight:800;
    background:linear-gradient(90deg,#7fd0ff,#dbf8ff);
    -webkit-background-clip:text;
    color:transparent;
}
.company{ opacity:0.75; margin-top:3px; }

/* BADGES */
.badges span{
    display:inline-block;
    background:#4a6cf7;
    padding:6px 14px;
    border-radius:12px;
    margin-top:10px;
    margin-right:6px;
    font-size:13px;
    box-shadow:0 0 12px rgba(90,140,255,0.35);
}

/* NEW BADGE */
.new-tag{
    position:absolute;
    right:12px;
    top:12px;
    padding:5px 10px;
    font-size:12px;
    background:#ff3860;
    border-radius:8px;
    animation:blink 1.3s infinite;
}
@keyframes blink{
    0%{opacity:1;}
    50%{opacity:0.3;}
    100%{opacity:1;}
}

/* DESCRIPTION */
.desc{
    margin-top:10px;
    opacity:0.85;
    line-height:1.6;
}

/* VIEW DETAILS BUTTON */
.more-btn{
    margin-top:15px;
    display:inline-block;
    padding:10px 16px;
    background:linear-gradient(90deg,#4a6cf7,#59dbff);
    border-radius:12px;
    font-weight:700;
    text-decoration:none;
    color:white;
}

/* PAGINATION */
.pagination{
    display:flex;
    justify-content:center;
    gap:12px;
    margin:30px 0;
}
.page-btn{
    padding:8px 14px;
    background:rgba(255,255,255,0.07);
    border-radius:10px;
    cursor:pointer;
}
.page-btn.active{ background:#4a6cf7; }

/* GENERIC MODAL BACKDROP */
.modal-bg{
    display:none;
    position:fixed;
    top:0;left:0;
    width:100%;height:100%;
    background:rgba(0,0,0,0.55);
    backdrop-filter:blur(8px);
    justify-content:center;
    align-items:center;
    z-index:9999;
}

/* MODAL BOX */
.modal{
    width:90%;
    max-width:550px;
    background:rgba(20,30,60,0.93);
    border:1px solid rgba(100,140,255,0.3);
    border-radius:20px;
    padding:28px;
    backdrop-filter:blur(14px);
}
.modal h2{
    font-size:30px;
    font-weight:900;
}
.modal-desc{
    margin-top:10px;
    opacity:0.85;
    line-height:1.6;
}
.close-btn{
    margin-top:18px;
    display:inline-block;
    padding:10px 16px;
    background:#ff3860;
    border-radius:10px;
    cursor:pointer;
}
.apply-modal-btn{
    margin-top:18px;
    display:inline-block;
    padding:10px 16px;
    background:#4a6cf7;
    border-radius:10px;
    color:white;
    text-decoration:none;
    font-weight:700;
}

/* APPLY FORM EXTRA STYLES */
.apply-form input,
.apply-form textarea{
    width:100%;
    padding:12px;
    margin:8px 0 18px;
    border-radius:12px;
    border:1px solid rgba(120,160,255,0.35);
    background:rgba(8,16,32,0.9);
    color:#fff;
    font-size:15px;
}
.apply-form textarea{
    min-height:110px;
    resize:vertical;
}
.apply-form button{
    width:100%;
    padding:14px;
    font-size:17px;
    background:linear-gradient(90deg,#4a6cf7,#59dbff);
    border:none;
    border-radius:12px;
    font-weight:700;
    cursor:pointer;
}
</style>
</head>
<body>

<!-- NAVBAR -->
<nav class="navbar">
    <div class="nav-left">
        <a href="index.html" class="nav-logo">ECSSScore</a>
    </div>

    <div class="nav-links" id="navMenu">
        <a href="index.html">Home</a>
        <a href="candidates.html">For Candidates</a>
        <a href="employer-dashboard.html">For Employers</a>
        <a href="postjobfree.html">Free Job Post</a>
        <a href="about.html">About</a>
        <a href="team.html">Team</a>
        <a href="mission.html">Mission</a>
        <a href="vision.html">Vision</a>
    </div>

    <div class="hamburger" onclick="toggleMenu()">
        <span></span><span></span><span></span>
    </div>
</nav>

<script>
/* Neon particles */
for(let i=0;i<40;i++){
  let p=document.createElement("div");
  p.classList.add("particle");
  p.style.left=Math.random()*100+"vw";
  p.style.animationDelay=(Math.random()*10)+"s";
  document.body.appendChild(p);
}
</script>

<!-- HERO -->
<div class="hero">
    <h1>High-Paying Roles Are Now Live!</h1>
    <div class="hero-sub">Reviewed, Verified & Curated by ECSS Hiring Team.</div>

    <!-- LAALCH -->
    <div class="lalach-box">
        <div class="lalach-meter"><div id="laFill" class="lalach-fill"></div></div>
        <div id="laText" class="lalach-text">Loading avg salary…</div>
    </div>
</div>

<div class="container">

    <!-- SEARCH BAR -->
    <div class="search-bar">
        <input id="searchInput" placeholder="Search by role, company, location…">
    </div>

    <!-- FILTERS -->
    <div class="filters">
        <div class="filter-btn active" data-filter="all">All</div>
        <div class="filter-btn" data-filter="EA">EA</div>
        <div class="filter-btn" data-filter="CoS">CoS</div>
        <div class="filter-btn" data-filter="Strategy">Strategy</div>
        <div class="filter-btn" data-filter="Ops">Ops</div>
        <div class="filter-btn" data-filter="Marketing">Marketing</div>
    </div>

    <!-- JOB LIST -->
    <div id="jobsList"></div>

    <!-- PAGINATION -->
    <div class="pagination" id="pagination"></div>
</div>

<!-- JOB DETAILS MODAL -->
<div class="modal-bg" id="modalBg">
    <div class="modal">
        <h2 id="modalTitle"></h2>
        <div id="modalCompany"></div>
        <div class="modal-desc" id="modalDesc"></div>
        <div class="apply-modal-btn" onclick="openApplyModal()">Apply for this role</div>
        <div class="close-btn" onclick="closeModal()">Close</div>
    </div>
</div>

<!-- APPLY FORM MODAL (SUPER SIMPLE) -->
<div id="applyModalBg" style="
  display:none;
  position:fixed;
  inset:0;
  background:rgba(0,0,0,0.6);
  backdrop-filter:blur(6px);
  justify-content:center;
  align-items:center;
  z-index:99999;
">
  <div style="
    width:90%;
    max-width:420px;
    background:#111a33;
    border:1px solid rgba(120,160,255,0.3);
    border-radius:16px;
    padding:25px;
    animation:fadeIn .25s ease-out;
  ">

    <h2 style="margin-top:0;font-size:22px;font-weight:800;">Apply for <span id="applyJobTitle"></span></h2>

    <label>Name</label>
    <input id="fName" style="width:100%;padding:12px;margin:8px 0 14px;border-radius:10px;border:none;background:#0b1328;color:white;">

    <label>Mobile</label>
    <input id="fMobile" style="width:100%;padding:12px;margin:8px 0 14px;border-radius:10px;border:none;background:#0b1328;color:white;">

    <label>Email</label>
    <input id="fEmail" type="email" style="width:100%;padding:12px;margin:8px 0 14px;border-radius:10px;border:none;background:#0b1328;color:white;">

    <label>Resume Link (Google Drive / PDF)</label>
    <input id="fResume" placeholder="Paste link here" style="width:100%;padding:12px;margin:8px 0 14px;border-radius:10px;border:none;background:#0b1328;color:white;">

    <label>Experience (Years)</label>
    <input id="fExp" style="width:100%;padding:12px;margin:8px 0 14px;border-radius:10px;border:none;background:#0b1328;color:white;">

    <label>Current CTC</label>
    <input id="fCTC" style="width:100%;padding:12px;margin:8px 0 20px;border-radius:10px;border:none;background:#0b1328;color:white;">

    <button onclick="submitSimpleApplication()" style="
      width:100%;
      padding:12px;
      background:#4a6cf7;
      border:none;
      border-radius:12px;
      font-size:17px;
      font-weight:700;
      color:white;
      cursor:pointer;
    ">Submit</button>

    <div onclick="closeApplyModal()" style="
      margin-top:15px;
      text-align:center;
      cursor:pointer;
      color:#ff6b6b;
    ">Close</div>

  </div>
</div>

<style>
@keyframes fadeIn {
    from {opacity:0; transform:scale(0.92);}
    to {opacity:1; transform:scale(1);}
}
</style>

<script>
/********** LAALACH METER **********/
let laTarget = 28;
let laCurrent = 0;
let laFill = document.getElementById("laFill");
let laText = document.getElementById("laText");

let salaryInterval = setInterval(() => {
    if (laCurrent >= laTarget) { 
        clearInterval(salaryInterval); 
    }
    laCurrent++;
    laFill.style.width = (laCurrent / laTarget * 100) + "%";
    laText.innerText = "Avg Salary: ₹" + laCurrent + " LPA";
}, 50);

/********** DYNAMIC JOB LOAD FROM GOOGLE SHEET **********/
const API_URL = "https://script.google.com/macros/s/AKfycbx17Wghn4JjP5wbtJycvnD5F5QTHqJMwm-WeI7gd82V-jLRpY3iXA9ViOtpJWFzbbDM/exec";
const APPLICATION_SCRIPT_URL = "https://script.google.com/macros/s/AKfycbx17Wghn4JjP5wbtJycvnD5F5QTHqJMwm-WeI7gd82V-jLRpY3iXA9ViOtpJWFzbbDM/exec";
 // same web app for POST

let jobs = [];
let activeFilter = "all";
let currentPage = 1;
let perPage = 4;
let selectedJob = null;

// Fetch jobs
fetch(API_URL)
    .then(res => res.json())
    .then(data => {
        jobs = data.jobs || [];
        loadJobs();
    })
    .catch(err => {
        console.error("API Fetch Error:", err);
        document.getElementById("jobsList").innerHTML = `
            <div style="text-align:center;opacity:0.8;margin-top:40px;">
                Error loading jobs. Please try again later.
            </div>`;
    });

/********** MAIN JOB RENDER FUNCTION **********/
function loadJobs() {

    let list = document.getElementById("jobsList");

    let filtered = jobs.filter(job => {
        return activeFilter === "all" ? true : job.category === activeFilter;
    });

    let searchVal = document.getElementById("searchInput").value.toLowerCase();
    if (searchVal) {
        filtered = filtered.filter(job =>
            job.title.toLowerCase().includes(searchVal) ||
            job.company.toLowerCase().includes(searchVal) ||
            job.location.toLowerCase().includes(searchVal)
        );
    }

    let total = filtered.length;
    let pages = Math.ceil(total / perPage);
    let start = (currentPage - 1) * perPage;
    let end = start + perPage;

    let pageJobs = filtered.slice(start, end);

    list.innerHTML = "";

    pageJobs.forEach(job => {
        let isNew = isNewJob(job.posted_on);

        list.innerHTML += `
            <div class="job-card">
                ${isNew ? `<div class="new-tag">NEW</div>` : ""}

                <div style="display:flex;align-items:center;gap:14px;">
                    <img src="${job.logo || 'https://i.imgur.com/ZKqY9bF.png'}" 
                         style="width:50px;height:50px;border-radius:12px;object-fit:cover;">
                    <div>
                        <div class="job-title">${job.title}</div>
                        <div class="company">${job.company} • ${job.location}</div>
                    </div>
                </div>

                <div class="badges">
                    <span>${job.salary}</span>
                    <span>${job.type}</span>
                    <span>${job.urgency || ''}</span>
                </div>

                <div class="desc">${job.description.substring(0, 90)}...</div>

                <a href="#" class="more-btn" onclick='openModal(${JSON.stringify(job)})'>
                    View Details
                </a>
            </div>
        `;
    });

    loadPagination(pages);
}

/********** PAGINATION **********/
function loadPagination(pages) {
    let pag = document.getElementById("pagination");
    pag.innerHTML = "";

    for (let i = 1; i <= pages; i++) {
        pag.innerHTML += `
            <div class="page-btn ${i === currentPage ? 'active' : ''}" onclick="goToPage(${i})">${i}</div>
        `;
    }
}
function goToPage(page) {
    currentPage = page;
    loadJobs();
}

/********** FILTER LOGIC **********/
document.querySelectorAll(".filter-btn").forEach(btn => {
    btn.onclick = () => {
        document.querySelectorAll(".filter-btn").forEach(b => b.classList.remove("active"));
        btn.classList.add("active");
        activeFilter = btn.dataset.filter;
        currentPage = 1;
        loadJobs();
    };
});

/********** SEARCH LOGIC **********/
document.getElementById("searchInput").addEventListener("input", () => {
    currentPage = 1;
    loadJobs();
});

/********** NEW TAG LOGIC **********/
function isNewJob(dateString) {
    if (!dateString) return false;
    let days = (new Date() - new Date(dateString)) / (1000 * 60 * 60 * 24);
    return days <= 7;
}

/********** MODALS **********/
function openModal(job) {
    selectedJob = job;
    document.getElementById("modalTitle").innerText = job.title;
    document.getElementById("modalCompany").innerText = job.company + " • " + job.location;
    document.getElementById("modalDesc").innerText = job.description;
    document.getElementById("modalBg").style.display = "flex";
}
function closeModal() {
    document.getElementById("modalBg").style.display = "none";
}
function openApplyModal() {
    document.getElementById("modalBg").style.display = "none"; // close details modal

    document.getElementById("applyJobTitle").innerText = selectedJob.title;
    document.getElementById("applyModalBg").style.display = "flex";
}
</script>
    <script>

/********** MODALS **********/
function openModal(job) {
    selectedJob = job;
    document.getElementById("modalTitle").innerText = job.title;
    document.getElementById("modalCompany").innerText = job.company + " • " + job.location;
    document.getElementById("modalDesc").innerText = job.description;
    document.getElementById("modalBg").style.display = "flex";
}
function closeModal() {
    document.getElementById("modalBg").style.display = "none";
}
function openApplyModal() {
    document.getElementById("modalBg").style.display = "none";
    document.getElementById("applyJobTitle").innerText = selectedJob.title;
    document.getElementById("applyModalBg").style.display = "flex";
}
function closeApplyModal() {
    document.getElementById("applyModalBg").style.display = "none";
}


/********** APPLICATION SUBMIT **********/
function submitSimpleApplication() {

  const payload = {
    type: "application",
    jobTitle: selectedJob.title,
    jobCompany: selectedJob.company,
    jobLocation: selectedJob.location,

    name: document.getElementById("fName").value,
    email: document.getElementById("fEmail").value,
    mobile: document.getElementById("fMobile").value,

    exp: document.getElementById("fExp").value,
    ctc: document.getElementById("fCTC").value,
    expectedCTC: document.getElementById("fCTC").value,
    notice: "",
    resume: document.getElementById("fResume").value,
    pitch: ""
  };

  fetch(APPLICATION_SCRIPT_URL, {
    method: "POST",
    mode: "no-cors",
    headers: { "Content-Type":"application/json" },
    body: JSON.stringify(payload)
  }).then(() => {
      alert("Application submitted!");
      closeApplyModal();
  }).catch(err => {
      alert("Network error: " + err);
  });
}

/********** NAV MENU **********/
function toggleMenu(){
    document.getElementById("navMenu").classList.toggle("active");
    document.querySelector(".hamburger").classList.toggle("open");
}

</script>


/********** NAV MENU TOGGLE **********/
function toggleMenu(){
    document.getElementById("navMenu").classList.toggle("active");
    document.querySelector(".hamburger").classList.toggle("open");
}
</script>

</body>
</html>
